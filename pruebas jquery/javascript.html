<!doctype html>
<html>
<head>
    <style>
        #anuncio{
            background-color: black;
            color: white;
            padding: 10px;
        }

        #preanuncio{
            background-color: red;
            color: white;
            padding: 10px;
        }

        .banner{
            background-color: rgba(201, 76, 76, 0.75);
            padding:20px;
            width: 320px;
            height: 240px;
            position: fixed;
            top: 100px;
            left: 100px;
            font-size:23px;
            text-align:center;

        }

        .banner2{
            background-color: rgba(200, 200, 76, 0.75);
            padding:20px;
            width: 320px;
            height: 240px;
            position: fixed;
            top: 100px;
            left: 100px;
            font-size:23px;
            text-align:center;
        }

        img{
            filter: blur(3px);
        }


    </style>
    <title>jquery</title>
    <script src="jquery360.js"></script>
    <script language="javascript">

        $(document).ready(function(){ // espera que se carge la página para ejecutarse

            $("#carrete img").width(500).hide().fadeIn(500); //todas las img dentro de id='carrete'
            //$("#anuncio").width(320).height(320).text("vende").hide().fadeIn(5000); // .text cambia el texto no tags
            var cadena = $("#anuncio").html(); // coge el html dentro de #anuncio
            $("#anuncio").html(cadena + " <p>nuevo texto"); // reemplaza lo que haya dentro de #anuncio
            $("#anuncio").append("<p>añadido a lo anterior") // añade al final
            $("#anuncio").prepend("<p>añadido al inicio") // añade al inicio
            $("#anuncio").before("<p>añadido al inicio del padre") // añade al inicio del tag padre del indicado
            $("#anuncio").after("<p>añadido al final del padre") // añade al final del tag padre del indicado


            document.getElementById("btnCerrar").addEventListener("click", disuelve_elemento, false);
            document.getElementById("btnCambiarClase").addEventListener("click", cambia_clase, false);
            $("#cont_checkbox").bind("mouseover", function(){
                $(this).css("cursor", "pointer");

            });

            
            $("#formulario").submit(function(){
                    //al pulsar submit se tratan los datos de los campos del formulario
                    //para hacer validaciones
                    if( $("#nombre").val()=="" ){
                        alert("Escriba un nombre");
                        return false;
                    }
                }

            );
            //uso de objeto XHR (AJAX)
            // carga el div de una página (actualidad), dentro de un div de esta página
            //importante dejar el espacio en blanco antes de la almohadilla si se concatena con url
            $("#elementos_externos").load("elemento_externo.html", "#actualidad"); 


            function cambiaValorTexto(){
                $("#txtCampoTexto").val(
                     $("#chkCafe").prop("checked") + " café" 
                );
            }

            // asocia dos eventos a un elemento y aplica una función
            /*
            document.getElementById("chkCafe").addEventListener("click mouseover", function(e){
                cambiaValorTexto();
                e.stopPropagation(); //evita la llamada al click del contenedor
            }, false);
            */

           //capturador de eventos jquery
            $("#chkCafe").bind("click change", function(e){
                cambiaValorTexto();
                e.stopPropagation(); //evita la llamada al click del contenedor
            });


            $("#cont_checkbox").bind("click", function(e){

                    var sel = $("#chkCafe").prop("checked");

                    if(sel){
                        $("#chkCafe").prop("checked", false)
                    }
                    else{
                        $("#chkCafe").prop("checked", true)
                    }

                    // el cambio de la propiedad checked no activa el evento change
                    // asi que llamamos a la función que hace cosas en el cambio
                    cambiaValorTexto();
                }
            );


            // coge el valor del campo de texto txtCampoTexto
            var texto = $("#txtCampoTexto").val();
            $("#txtCampoTexto").val(texto + " hola");
            $(":text").val(texto + " hola " + 1234); // accede a todos los input text

            // cambia entre la clase original y la que se le especifique
            function cambia_clase(){
                $("#banner").toggleClass("banner2");
            }

            // E A C H 
            // recorre todas las etiquetas de tipo img y les aplica el estilo 
            // coge todos los elementos img y les aplica una función
            $("img").each(
                function(){
                    $(this).css("border", "5px solid black");
                }
            );

            // coge todos los elementos img y les aplica un estilo
            $("img").css("border", "15px solid gray");


            // coge todos los ID de elementos en body e hijos
            var array_elementos = document.querySelectorAll("bodyXXX"); 
            
            // añade a todos los elementos un escuchador de evento click con bucle for
            for(var i=0; i<array_elementos.length; i++){
                
                array_elementos[i].addEventListener("click", disuelve_elemento, false);

                var cadena = array_elementos[i]+"";

                if( cadena.includes("imagen") ){ // si existe la cadena imagen en el texto...
                    alert("apuntado " + cadena);
                    document.getElementById(cadena).addEventListener("mouseover", cambiar_imagen, false);
                }

            }

            // cierra la ventana con un fundido
            function disuelve_elemento(e){ 
                // la e es el elemento que ha llamado a la función (se pasa implícitamente)
                $(e.target).css("background-color", "red"); // cambia propiedades css directamente
                $(e.target).parent().fadeOut(250, function() { $(this).remove(); } ); 
                //parent se refiere al contenedor, next y previous a los elementos que lo rodean dentro del padre
            }

            var array_imagenes = document.querySelectorAll("img");

            for(var i=0; i<array_imagenes.length; i++){
                array_imagenes[i].addEventListener("mouseover", cambiar_imagen, false);
                array_imagenes[i].addEventListener("mouseout", cambiar_imagen, false);
            }
            

            function cambiar_imagen(e){

                var cadena = $(e.target).css("filter");
                //alert(cadena);
                //e.preventDefaualt // evita el comportamiento por defecto del link =  return false

                if(cadena.includes("3px")){
                    $(e.target).css("filter" ,"blur(0px)");
                }else{
                    $(e.target).css("filter" ,"blur(3px)");
                }
            }


        });
    </script>

</head>
</head>
</head>

<body>

<div id="carrete">
    <img id="imagen1" src="images/16433178_303_bw.jpg">
    <img id="imagen2" src="images/16433178_303_bw.jpg">

<div id="preanuncio">

    <div id="anuncio">
        <h2>hola</h2>
        <h3>adiós</h3>
    </div>

</div>

<div id="banner" class="banner">
    Banner de prueba<br>
    <input id="btnCerrar" type="button" value=" CERRAR ">
    <input id="btnCambiarClase" type="button" value=" CAMBIAR CLASE ">
    <input id="txtCampoTexto" type="text" value="texto">
    <span id="cont_checkbox" onselectstart="return false"><input id="chkCafe" type="checkbox">¿Café?</span>

</div>

<div id="elementos_externos"></div>

</body>
</html>